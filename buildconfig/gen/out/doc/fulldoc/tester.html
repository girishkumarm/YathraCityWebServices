<HEAD>
<link href="global.css" media="screen" rel="stylesheet" type="text/css">    
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function() {

	$("#endpoint").val(window.location.href.replace("tester.html","rest").replace('\/fulldoc',""));
	var id = -1;
	$("#sb").val(id);
	$("#output").val("");
	$("#sb").live("change",function()
	{
		$("#output").val("");
		var txt = "";
		id = $(this).val();
		var urli = $("#urlinputs_"+id).html().split(",");
		for (var i=0;i<urli.length;i++ ) if (urli[i] !== "")
		{
			txt += "<i>"+urli[i]+"</i><br/>";
			txt += "<input style=\"width:200px\"  class=\"urlinput\" type=\"text\" id=\"input_"+i+"\" /><br/><br/>";
		}
		$("#urlinput").html(txt);
		var type =  $("#type_"+id).html();
		var ptxt = "";
		if (type !== "GET")
		{
			var jtxt =  $("#postinput_"+id+" pre").html();
			if (jtxt !== "")
				ptxt = "<textarea id=\"jtxt\" style=\"width:400px;height:200px\">" + jtxt + "</textarea>";
		}
		$("#jsoninput").html(ptxt);
	});
	$("#submitreq").live("click", function()
	{
		var reqtype =  $("#type_"+id).html();
		var requrl =  $("#endpoint").val()+"/"+$("#url_"+id).html();
		$(".urlinput").each(function(index, inp) {
			   requrl += "/" +$(inp).val();
		});
		var jsoninput = $("#jtxt").val();
		if (reqtype == "GET")
		{
			$.ajax({
				type : reqtype,
				url : requrl,
				success : function(ret) {
					handler.success(ret);
				},
				error : function(err) {
					handler.failure(err);
				}
			});									
		} else
		{
			$.ajax({
				type : reqtype,
				url : requrl,
				data : jsoninput,
				dataType : "json",
				contentType : "application/json; charset=utf-8",
				success : function(ret) {
					handler.success(ret);
				},
				error : function(err) {
					handler.failure(err);
				}
			});
			
		}	
	});
	
	$("#clearOutput").live('click',function(){
		$("#output").val("");
	})
	$("#formatText").live('click',function(){
		FormatTextarea();
	})

});

function FormatTextarea() {
  var sJSON = $("#output").val();
  if (sJSON.length > 0) {
    try {
      var oJSON = JSON.parse(sJSON);
      $("#output").val( FormatJSON(oJSON) );
    } catch(sError) {
      $("#output").val("You are attempting to parse invalid JSON.")
    }
  } else {
    $("#output").val("I still haven't found what I'm looking for");
  }
}
function RealTypeOf(v) {
  if (typeof(v) == "object") {
    if (v === null) return "null";
    if (v.constructor == (new Array).constructor) return "array";
    if (v.constructor == (new Date).constructor) return "date";
    if (v.constructor == (new RegExp).constructor) return "regex";
    return "object";
  }
  return typeof(v);
}
function FormatJSON(oData, sIndent) {
  if (arguments.length < 2) {
    var sIndent = "";
  }
  var sIndentStyle = "    ";
  var sDataType = RealTypeOf(oData);

  // open object
  if (sDataType == "array") {
    if (oData.length == 0) {
      return "[]";
    }
    var sHTML = "[";
  } else {
    var iCount = 0;
    $.each(oData, function() {
      iCount++;
      return;
    });
    if (iCount == 0) { // object is empty
      return "{}";
    }
    var sHTML = "{";
  }

  // loop through items
  var iCount = 0;
  $.each(oData, function(sKey, vValue) {
    if (iCount > 0) {
      sHTML += ",";
    }
    if (sDataType == "array") {
      sHTML += ("\n" + sIndent + sIndentStyle);
    } else {
      sHTML += ("\n" + sIndent + sIndentStyle + "\"" + sKey + "\"" + ": ");
    }

    // display relevant data type
    switch (RealTypeOf(vValue)) {
      case "array":
      case "object":
        sHTML += FormatJSON(vValue, (sIndent + sIndentStyle));
        break;
      case "boolean":
      case "number":
        sHTML += vValue.toString();
        break;
      case "null":
        sHTML += "null";
        break;
      case "string":
        sHTML += ("\"" + vValue + "\"");
        break;
      default:
        sHTML += ("TYPEOF: " + typeof(vValue));                                                                                              }
        // loop
        iCount++;
    }
  )

  // close object
  if (sDataType == "array") {
    sHTML += ("\n" + sIndent + "]");
  } else {
    sHTML += ("\n" + sIndent + "}");
  }

  // return
  return sHTML;
}
var handler = {
	success:function(res){
		$("#output").val(JSON.stringify(res));		
	},
	failure:function(err){
		$("#output").val(JSON.stringify(err));		
	}
}
</script>
</HEAD>
<BODY>
<table width="98%" border="1" style="margin:5px;border-collapse:collapse; ">
<tr>
<td colspan="2"> 
<h1>InBlox API </h1>
</td>
</tr>
<tr>
<td width="200" valign="top"> <div >
<br/><br/>
<a href="home.html">Home</a><br/>
<a href="commons.html">Commons</a><br/>
<a href="constructs.html">Constructs</a><br/>
<a href="schema.html">Schema</a><br/>
<a href="errorcodes.html">Error Codes</a><br/>
<b>Tester</b><BR/>
<BR/><BR/><b style="color:#ccccff">SERVICES</b><BR/><a href="CarCancelingServicesvc.html">CarCancelingService</a><br/>
<a href="CountingServicesvc.html">CountingService</a><br/>
<a href="NumberOfUserssvc.html">NumberOfUsers</a><br/>
<a href="Couponssvc.html">Coupons</a><br/>
<a href="Driversvc.html">Driver</a><br/>
<a href="SendDetailsToCustomersAndAdminsvc.html">SendDetailsToCustomersAndAdmin</a><br/>
<a href="Carsvc.html">Car</a><br/>
<a href="CarBookingServicesvc.html">CarBookingService</a><br/>
<a href="SendMailToCustomerssvc.html">SendMailToCustomers</a><br/>
<a href="LoginServicesvc.html">LoginService</a><br/>
<a href="OTPServicesvc.html">OTPService</a><br/>
<a href="RegisterServicesvc.html">RegisterService</a><br/>

</div>
</td>
<td valign="top">
<!--BEGIN CONTENT AREA-->
<table width="100%" height="100%" style="border:0"><tr><td valign="top" width="50%"  style="border:0">
<h1>API Tester</h1> <br/><br/>
<b>Endpoint</b><br/>
<input id="endpoint" type="text" style="width:400px" value="" /><br/><br/>
<b>Select Service </b><br/>
<select id="sb"> <option value="-1">Select</option><OPTION value="0">CarCancelingService:cancelBooking</OPTION><OPTION value="1">CountingService:countNumberOfUsers</OPTION><OPTION value="2">NumberOfUsers:getNumberOfUsers</OPTION><OPTION value="3">Coupons:coupons</OPTION><OPTION value="4">Coupons:getalltheCoupons</OPTION><OPTION value="5">Coupons:updateCoupon</OPTION><OPTION value="6">Coupons:deleteCoupons</OPTION><OPTION value="7">Driver:registerdriver</OPTION><OPTION value="8">Driver:updateDriverAvailability</OPTION><OPTION value="9">SendDetailsToCustomersAndAdmin:mailDetailsToCustomerAndAdmin</OPTION><OPTION value="10">Car:registerCar</OPTION><OPTION value="11">Car:checkCarAvailability</OPTION><OPTION value="12">Car:getAvailableCarDetails</OPTION><OPTION value="13">CarBookingService:bookingCar</OPTION><OPTION value="14">SendMailToCustomers:mailCustomer</OPTION><OPTION value="15">LoginService:loginUser</OPTION><OPTION value="16">OTPService:getOTP</OPTION><OPTION value="17">OTPService:getOTPMatchResponse</OPTION><OPTION value="18">RegisterService:registerUser</OPTION></select>
<br/><br/>
<div id="urlinput"> </div>
<div id="jsoninput"> </div><br/><br/>
<div><span id="clearOutput" style="background:#ccc;border:1px solid black;padding:2px;float:right;cursor:pointer">clearOutput</span>&nbsp;&nbsp;<span id="formatText" style="background:#ccc;border:1px solid black;padding:2px;float:right;cursor:pointer">formatOutput</span>&nbsp;&nbsp;<span id="submitreq" style="background:#ccc;border:1px solid black;padding:2px;float:right;cursor:pointer">Submit</span></div>

</td><td valign="top" width="50%"  style="border:0">
<b>OUTPUT</b><br/>
<textarea style="width:400px;height:400px" id="output">
</textarea>
</td></tr></table>
</td></tr></table>
</BODY>
<div id="servicecontent" style="display:none"><div id="url_0">canceling/cancel-booking</div><div id="type_0">POST</div><div id="urlinputs_0"></div><div id="postinput_0"><pre>{
   "id":820626247,
   "fromDate":"?",
   "toDate":"?",
   "travelCity":"?",
   "customerName":"?",
   "customerNumber":"?",
   "pickUpCity":"?",
   "customerEmail":"?"
}
</pre></div><div id="url_1">counting/count-number-users</div><div id="type_1">GET</div><div id="urlinputs_1"></div><div id="postinput_1"><pre></pre></div><div id="url_2">getnumberofusers/get-number-of-users</div><div id="type_2">GET</div><div id="urlinputs_2"></div><div id="postinput_2"><pre></pre></div><div id="url_3">coupons/coupons-of-tab</div><div id="type_3">POST</div><div id="urlinputs_3"></div><div id="postinput_3"><pre>{
   "id":2147483647,
   "coupon":"?",
   "fromDate":"?",
   "toDate":"?"
}
</pre></div><div id="url_4">coupons/get-list-of-coupons</div><div id="type_4">GET</div><div id="urlinputs_4"></div><div id="postinput_4"><pre></pre></div><div id="url_5">coupons/update-coupons</div><div id="type_5">POST</div><div id="urlinputs_5"></div><div id="postinput_5"><pre>{
   "id":2147483647,
   "coupon":"?",
   "fromDate":"?",
   "toDate":"?"
}
</pre></div><div id="url_6">coupons/delete-coupons</div><div id="type_6">GET</div><div id="urlinputs_6">couponName,</div><div id="postinput_6"><pre></pre></div><div id="url_7">driver/register-driver</div><div id="type_7">POST</div><div id="urlinputs_7"></div><div id="postinput_7"><pre>{
   "id":2147483647,
   "driverName":"?",
   "carName":"?",
   "driverPhoneNumber":"?",
   "driverLicence":"?",
   "agencyName":"?",
   "agencyPhoneNumber":"?",
   "location":"?",
   "carType":"?",
   "carNumber":"?"
}
</pre></div><div id="url_8">driver/update-driver-availability</div><div id="type_8">POST</div><div id="urlinputs_8"></div><div id="postinput_8"><pre>{
   "id":1384503903,
   "driverName":"?",
   "carName":"?",
   "driverPhoneNumber":"?",
   "driverLicence":"?",
   "location":"?",
   "carNumber":"?",
   "availability":?,
   "carType":"?"
}
</pre></div><div id="url_9">mailing-details/mail-details-customer-and-admin</div><div id="type_9">POST</div><div id="urlinputs_9"></div><div id="postinput_9"><pre>{
   "id":2147483647,
   "fromDate":"?",
   "carNumber":"?",
   "customerNumber":"?"
}
</pre></div><div id="url_10">cars/register-car</div><div id="type_10">POST</div><div id="urlinputs_10"></div><div id="postinput_10"><pre>{
   "id":2147483647,
   "carName":"?",
   "carAgency":"?",
   "registered":?,
   "carAvailability":?,
   "carNumber":"?",
   "carCapacity":?,
   "carRegisteredAt":"?",
   "pricePerKilometer":?,
   "minimunDistancePerDay":?,
   "carType":"?",
   "carModel":"?"
}
</pre></div><div id="url_11">cars/check-car-availability</div><div id="type_11">POST</div><div id="urlinputs_11"></div><div id="postinput_11"><pre>{
   "id":2147483647,
   "carNumber":"?",
   "carRegisteredAt":"?",
   "carType":"?",
   "carName":"?"
}
</pre></div><div id="url_12">cars/get-car-details</div><div id="type_12">POST</div><div id="urlinputs_12"></div><div id="postinput_12"><pre>{
   "id":2147483647,
   "registeredAt":"?",
   "carType":"?",
   "carNumber":"?",
   "carName":"?",
   "fromDate":"?",
   "toDate":"?"
}
</pre></div><div id="url_13">booking/booking-car</div><div id="type_13">POST</div><div id="urlinputs_13"></div><div id="postinput_13"><pre>{
   "id":192298051,
   "bookingId":"?",
   "fromDate":"?",
   "toDate":"?",
   "carNumber":"?",
   "travelCity":"?",
   "carAgency":"?",
   "carAgencyPhoneNumber":"?",
   "driverName":"?",
   "drivePhoneNumber":"?",
   "coupon":"?",
   "customerName":"?",
   "customerNumber":"?",
   "pickUpCity":"?",
   "address":"?",
   "carLocation":"?",
   "carType":"?",
   "carlicence":"?",
   "customerEmail":"?"
}
</pre></div><div id="url_14">mailing/mail-customer</div><div id="type_14">POST</div><div id="urlinputs_14"></div><div id="postinput_14"><pre>{
   "id":1336595160,
   "fromDate":"?",
   "carNumber":"?",
   "customerNumber":"?"
}
</pre></div><div id="url_15">login/login-user</div><div id="type_15">POST</div><div id="urlinputs_15"></div><div id="postinput_15"><pre>{
   "id":2147483647,
   "yathraCityUserId":"?",
   "userAccountId":"?",
   "password":"?"
}
</pre></div><div id="url_16">otp/get-otp</div><div id="type_16">GET</div><div id="urlinputs_16">phoneNumber,</div><div id="postinput_16"><pre></pre></div><div id="url_17">otp/get-otp-match-response</div><div id="type_17">GET</div><div id="urlinputs_17">phoneNumber,otp,</div><div id="postinput_17"><pre></pre></div><div id="url_18">register/register-user</div><div id="type_18">POST</div><div id="urlinputs_18"></div><div id="postinput_18"><pre>{
   "id":1527267077,
   "userName":"?",
   "phoneNumber":"?",
   "userAccountId":"?",
   "password":"?"
}
</pre></div></div>
</HTML>