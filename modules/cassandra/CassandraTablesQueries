//To create a keyspace execute the following code in cassandra
CREATE KEYSPACE yathra
WITH REPLICATION = { 'class' : 'SimpleStrategy', 'replication_factor' : 1 };


//user table
use yathra;
CREATE TABLE Users(
user_account_id text,
user_name text,
password text,
phone_number text,
PRIMARY KEY (user_account_id) )
WITH compression = { 'sstable_compression' : 'LZ4Compressor', 'chunk_length_kb' : '64' } 
AND compaction = { 'class' : 'LeveledCompactionStrategy', 'sstable_size_in_mb' : '160' } 
AND speculative_retry = '100ms' 
AND bloom_filter_fp_chance = 0.1 
AND caching = 'keys_only';

//otp table
CREATE TABLE otps(
otp text,
phone_number text,
PRIMARY KEY (phone_number) )
WITH compression = { 'sstable_compression' : 'LZ4Compressor', 'chunk_length_kb' : '64' } 
AND compaction = { 'class' : 'LeveledCompactionStrategy', 'sstable_size_in_mb' : '160' } 
AND speculative_retry = '100ms' 
AND bloom_filter_fp_chance = 0.1 
AND caching = 'keys_only';

INSERT INTO otps (otp, phone_number) VALUES ('OTP','PHONE_NUMBER') USING TTL 300;

//car table
CREATE TABLE cars(
car_availability boolean,
car_registered boolean,
car_number text,
car_name text,
car_registered_at text,
car_capacity int,
uuid text,
car_type text,
price_per_kilometer int,
minimun_distance_per_day int,
PRIMARY KEY ((car_registered_at,car_type),car_number ))
WITH compression = { 'sstable_compression' : 'LZ4Compressor', 'chunk_length_kb' : '64' } 
AND compaction = { 'class' : 'LeveledCompactionStrategy', 'sstable_size_in_mb' : '160' } 
AND speculative_retry = '100ms' 
AND bloom_filter_fp_chance = 0.1 
AND caching = 'keys_only';

//Create indexes for car_availability 
CREATE INDEX is_car_available_index ON yathra.cars( car_availability);

//Create indexes for car_registered 
CREATE INDEX is_car_registered_index ON yathra.cars( car_registered);

//Create indexes for the uuid
CREATE INDEX uuid_for_car ON yathra.cars( uuid);

CREATE TABLE driver_details(
driver_phone_number text,
driver_licence text,
uuid text,
driver_name text,
agency_name text,
agency_phone_number text,
location text,
PRIMARY KEY ((agency_name,agency_phone_number),driver_name,driver_phone_number))
WITH compression = { 'sstable_compression' : 'LZ4Compressor', 'chunk_length_kb' : '64' } 
AND compaction = { 'class' : 'LeveledCompactionStrategy', 'sstable_size_in_mb' : '160' } 
AND speculative_retry = '100ms' 
AND bloom_filter_fp_chance = 0.1 
AND caching = 'keys_only';

//Create indexes for the uuid
CREATE INDEX uuid_for_driver ON yathra.driver_details( uuid);

CREATE TABLE counter_table( counter_value counter, url text,primary key(url) );

CREATE TABLE coupen_details( coupen_name text,valid_from text,valid_to text,primary key(coupen_name,valid_to));